webpackJsonp([1],{"41Jp":function(t,e){},AXSd:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("router-link",{attrs:{to:{name:"Home"}}},[t._v("Home")]),t._v(" "),n("router-link",{attrs:{to:"/login"}},[t._v("Login")]),t._v(" "),n("router-link",{attrs:{to:"/user"}},[t._v("User")]),t._v(" "),n("router-view"),t._v(" "),t._m(2)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{attrs:{id:"header"}},[e("h1",[this._v("Splootify")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h3",[e("a",{attrs:{href:"plan.html"}},[this._v("Project Plan")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{attrs:{id:"footer"}},[e("h3",[this._v("Created by: Kevin Bu and Sherry Feng")])])}]};var a=n("VU/8")({name:"App"},s,!1,function(t){n("AXSd")},null,null).exports,i=n("/ocq"),r=n("fZjL"),l=n.n(r),c=n("Sazm"),u=n.n(c).a.initializeApp({apiKey:"AIzaSyBdLoyJdNa1hug8fmJVq08YQjfOjdsoyC0",authDomain:"cs290-trello-f0978.firebaseapp.com",databaseURL:"https://cs290-trello-f0978.firebaseio.com",storageBucket:"cs290-trello-f0978.appspot.com"}).database(),d=u.ref("songs"),p=u.ref("users"),v={name:"Home",firebase:{songs:d},data:function(){return{artist:"",song:""}},methods:{generateSong:function(){u.ref("songs").once("value").then(function(t){var e=t.val(),n=l()(e).length,o=Math.floor(Math.random()*n),s=l()(e)[o],a=e[s];console.log(s),console.log(a);var i=a.artist,r=(a.downvotes,a.genre),c=a.length,u=(a.uploads,a.upvotes,a.URL,document.getElementById("table")),d=document.createElement("tr"),p=document.createElement("th"),v=document.createElement("th"),h=document.createElement("th"),g=document.createElement("th");s=(s=(s=(s=(s=s.split("<>").join(".")).split(")(").join("#")).split("&&").join("$")).split("%%").join("[")).split("@@").join("]"),p.appendChild(document.createTextNode(s)),v.appendChild(document.createTextNode(i)),h.appendChild(document.createTextNode(r)),g.appendChild(document.createTextNode(c)),d.appendChild(p),d.appendChild(v),d.appendChild(h),d.appendChild(g),u.appendChild(d)})}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),e("div",[e("button",{staticClass:"btn",attrs:{type:"button",id:"generateSong"},on:{click:this.generateSong}},[this._v("Get a song recommendation")]),e("br"),this._v(" "),e("br")]),this._v(" "),this._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Welcome to your song recommendation buddy")]),t._v(" "),n("h3",[t._v("Without an account, you can only access our basic guest features")]),t._v(" "),n("h3",[t._v("As a user, you will be able to "),n("u",[t._v("filter song generation criteria")]),t._v(" as well as "),n("u",[t._v("save")]),t._v(", "),n("u",[t._v("downvote")]),t._v(", and "),n("u",[t._v("upvote")]),t._v(" songs")]),t._v(" "),n("h3",[t._v('To create an account, click the "user" tab in the upper right of this screen')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticStyle:{width:"100%"},attrs:{id:"table"}},[e("tr",[e("th",{attrs:{id:"categories"}},[this._v("Song")]),this._v(" "),e("th",{attrs:{id:"categories"}},[this._v("Artist")]),this._v(" "),e("th",{attrs:{id:"categories"}},[this._v("Genre")]),this._v(" "),e("th",{attrs:{id:"categories"}},[this._v("Length")])])])}]};var g=n("VU/8")(v,h,!1,function(t){n("Xh8Q")},"data-v-ff46a95e",null).exports,m={name:"Login",data:function(){return{email:""}},methods:{signIn:function(){console.log("signing..."),console.log("teehee"),window.location="https://splootserver.herokuapp.com/login"}}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"login"}},[e("h1",[this._v("Log in to have full music access")]),this._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{id:"login-button"},on:{click:this.signIn}},[this._v("Log in with Spotify")])])},staticRenderFns:[]},_=n("VU/8")(m,f,!1,null,null,null).exports,b=n("gRE1"),w=n.n(b),y=(n("OAwv"),{name:"User",firebase:{songs:d,users:p},data:function(){return{added:[],artist:"",createEmail:"",createPassword:"",coins:0,downvoted:[],email:"kb@gmail.com",password:"",permission:"",saved:"",song:"",upvoted:""}},methods:{authenticate:function(t,e){console.log("authenticate test"),console.log(t),console.log(e);var n=t.split(".").join("<>");u.ref("users/"+n+"/password").once("value").then(function(t){var n=t.val();return e===n?(this.permission="user",console.log("Authenticated")):console.log("Not authenticated"),!0})},createAccount:function(t,e){console.log("createAccount test"),console.log(t),console.log(e);var n=t.split(".").join("<>");u.ref("users/"+n).once("value").then(function(t){return t.exists()?alert("This email already exists in our system"):u.ref("users/"+n).set({added:["null"],coins:10,downvoted:["null"],password:e,permission:"user",saved:["null"],upvoted:["null"]}),!0}),this.coins=10,this.permission="user",this.createEmail="",this.createPassword=""},viewProfile:function(){},changePassword:function(t,e){},resetPassword:function(){},viewMusic:function(){},addSong:function(t,e){var n=this.song.replace(/\s/,"%20"),o=this.artist.replace(/\s/,"%20"),s=window.location.hash.substring(20);console.log(s);var a="https://api.spotify.com/v1/search?q=artist:"+o+"%20name:"+n+"&type=track";console.log(a),fetch(a,{headers:{Authorization:"Bearer "+s}}).then(function(t){200!=t.status&&alert("Data input not valid, try again!"),console.log(t)}),fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+s}}).then(function(t){return t.json()}).then(function(t){return console.log(t)}),fetch("https://api.spotify.com/v1/search?q=artist:"+o+"&type=track",{headers:{Authorization:"Bearer "+s}}).then(function(t){return t.json()}).then(function(t){return console.log(t)});var i=this.email.split(".").join("<>"),r=0,l=1,c=0,d=t.split(".").join("<>");d=(d=(d=(d=d.split("#").join(")(")).split("$").join("&&")).split("[").join("%%")).split("]").join("@@"),u.ref("songs/"+d).once("value").then(function(t){return t.exists()&&(r=t.val().downvotes,l=t.val().uploads+1,c=t.val().upvotes),u.ref("songs/"+d).set({artist:e,downvotes:r,genre:"null",length:"null",uploads:l,upvotes:c,URL:"null"}),u.ref("users/"+i+"/added/"+d).set({artist:e,downvotes:r,genre:"null",length:"null",uploads:l,upvotes:c,URL:"null"}),!0}),this.coins+=1,this.song="",this.artist=""},generateSong:function(t,e){(console.log(this.permission),"user"==this.permission)?(this.coins-=1,u.ref("songs").once("value").then(function(t){var e=t.val(),n=l()(e).length,o=Math.floor(Math.random()*n),s=l()(e)[o],a=e[s];console.log(s),console.log(a);var i=a.artist,r=(a.downvotes,a.genre),c=a.length,u=(a.uploads,a.upvotes,a.URL,document.getElementById("table")),d=document.createElement("tr"),p=document.createElement("th"),v=document.createElement("th"),h=document.createElement("th"),g=document.createElement("th");s=(s=(s=(s=(s=s.split("<>").join(".")).split(")(").join("#")).split("&&").join("$")).split("%%").join("[")).split("@@").join("]"),p.appendChild(document.createTextNode(s)),v.appendChild(document.createTextNode(i)),h.appendChild(document.createTextNode(r)),g.appendChild(document.createTextNode(c)),d.appendChild(p),d.appendChild(v),d.appendChild(h),d.appendChild(g),u.appendChild(d)})):alert("You have not successfully logged in. Please do so first.")},saveSong:function(t,e){var n=this.email.split(".").join("<>"),o=t.split(".").join("<>");o=(o=(o=(o=o.split("#").join(")(")).split("$").join("&&")).split("[").join("%%")).split("]").join("@@"),u.ref("songs/"+o).once("value").then(function(t){var s=t.val().URL,a=t.val().downvotes,i=t.val().genre,r=t.val().length,l=t.val().uploads,c=t.val().upvotes;return u.ref("users/"+n+"/saved/"+o).set({URL:s,artist:e,downvotes:a,genre:i,length:r,uploads:l,upvotes:c}),!0});var s=this.email.split(".").join("<>");u.ref("users/"+s+"/saved").once("value").then(function(t){var e=t.val(),n={};l()(e).forEach(function(t){console.log(t,e[t]),e[t].genre in n?n[e[t].genre]+=1:n[e[t].genre]=1}),console.log(n);var o=w()(n),s=l()(n);console.log(o),console.log(s);var a=d3.select("body").append("svg").attr("width",400).attr("height",40*o).selectAll("g").data(o).enter().append("g").attr("transform",function(t,e){return"translate(0,"+40*e+")"});return a.append("rect").attr("width",function(t){return 25*t}).attr("height",39),a.append("text").attr("x",function(t){return 25*t}).attr("y",20).attr("dy",".35em").text(function(t,e){return s[e]+": "+t}),!0})},upvoteSong:function(t,e){var n=this.email.split(".").join("<>"),o=t.split(".").join("<>");o=(o=(o=(o=o.split("#").join(")(")).split("$").join("&&")).split("[").join("%%")).split("]").join("@@"),u.ref("songs/"+o).once("value").then(function(t){var s=t.val().URL,a=t.val().downvotes,i=t.val().genre,r=t.val().length,l=t.val().uploads,c=t.val().upvotes;return u.ref("users/"+n+"/upvoted/"+o).set({URL:s,artist:e,downvotes:a,genre:i,length:r,uploads:l,upvotes:c}),!0})},downvoteSong:function(t,e){var n=this.email.split(".").join("<>"),o=t.split(".").join("<>");o=(o=(o=(o=o.split("#").join(")(")).split("$").join("&&")).split("[").join("%%")).split("]").join("@@"),u.ref("songs/"+o).once("value").then(function(t){var s=t.val().URL,a=t.val().downvotes,i=t.val().genre,r=t.val().length,l=t.val().uploads,c=t.val().upvotes;return u.ref("users/"+n+"/downvoted/"+o).set({URL:s,artist:e,downvotes:a,genre:i,length:r,uploads:l,upvotes:c}),!0})}}}),j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"authentication"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.createEmail,expression:"createEmail"}],staticClass:"email",attrs:{placeholder:"Enter your email"},domProps:{value:t.createEmail},on:{input:function(e){e.target.composing||(t.createEmail=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.createPassword,expression:"createPassword"}],staticClass:"password",attrs:{placeholder:"Create a password"},domProps:{value:t.createPassword},on:{input:function(e){e.target.composing||(t.createPassword=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button",id:"createAccount"},on:{click:function(e){t.createAccount(t.createEmail,t.createPassword)}}},[t._v("Create account")]),n("br"),t._v(" "),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"email",attrs:{placeholder:"Enter your email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"password",attrs:{placeholder:"Enter your password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button",id:"login"},on:{click:function(e){t.authenticate(t.email,t.password)}}},[t._v("Login")]),n("br"),t._v(" "),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.song,expression:"song"}],staticClass:"song",attrs:{placeholder:"Enter song name"},domProps:{value:t.song},on:{input:function(e){e.target.composing||(t.song=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.artist,expression:"artist"}],staticClass:"artist",attrs:{placeholder:"Enter song artist"},domProps:{value:t.artist},on:{input:function(e){e.target.composing||(t.artist=e.target.value)}}}),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button",id:"add"},on:{click:function(e){t.addSong(t.song,t.artist)}}},[t._v("Add song")]),n("br"),t._v(" "),n("br"),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button",id:"add"},on:{click:function(e){t.saveSong("Weekend","Louis the Child")}}},[t._v("Save song")]),n("br"),t._v(" "),n("br"),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button",id:"add"},on:{click:function(e){t.upvoteSong("Yellow","Coldplay")}}},[t._v("Upvote song")]),n("br"),t._v(" "),n("br"),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button",id:"add"},on:{click:function(e){t.downvoteSong("Yellow","Coldplay")}}},[t._v("Downvote song")]),n("br"),t._v(" "),n("br"),t._v(" "),n("input",{attrs:{type:"radio",name:"genre",value:"Pop"}}),t._v("Pop"),n("br"),t._v(" "),n("input",{attrs:{type:"radio",name:"genre",value:"Hip-Hop/Rap"}}),t._v("Hip-Hop/Rap"),n("br"),t._v(" "),n("div",[n("button",{staticClass:"btn",attrs:{type:"button",id:"generateSong"},on:{click:t.generateSong}},[t._v("Get a song recommendation")]),n("br"),t._v(" "),n("br")]),t._v(" "),n("button",{staticClass:"btn",attrs:{type:"button",id:"viewMusic"},on:{click:t.viewMusic}},[t._v("View music genres in a chart")]),n("br"),t._v(" "),n("br"),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticStyle:{width:"100%"},attrs:{id:"table"}},[e("tr",[e("th",{attrs:{id:"categories"}},[this._v("Song")]),this._v(" "),e("th",{attrs:{id:"categories"}},[this._v("Artist")]),this._v(" "),e("th",{attrs:{id:"categories"}},[this._v("Genre")]),this._v(" "),e("th",{attrs:{id:"categories"}},[this._v("Length")])])])}]};var C=n("VU/8")(y,j,!1,function(t){n("41Jp")},null,null).exports;o.a.use(i.a);var E=new i.a({routes:[{path:"/",name:"Home",component:g},{path:"/login",name:"Login",component:_},{path:"/user",name:"User",component:C}]});o.a.config.productionTip=!1,new o.a({el:"#app",router:E,components:{App:a},template:"<App/>"})},Xh8Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f0d0e91885c871382a14.js.map